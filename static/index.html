<!DOCTYPE html>
<html>
<head>
    <title>Language Preference Page</title>
    <script>
        function getQueryParam(param) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(param);
        }
        function savePreferences(event) {
            event.preventDefault();
            
            const language = document.getElementById('language').value;
            const frequency = document.getElementById('frequency').value;
            const email = getQueryParam("email")

            let langurl = "/proxy"
            switch(language){
                case "hindi":
                    langurl = "/proxy/switch_to_hindi"
                    break;
                case "english":
                    langurl = "/proxy/switch_to_english"
                    break;
                case "both":
                    langurl = "/proxy/use_both"
            }
            
            // update language
            fetch(langurl + "?email=" + email, {
                method: 'GET',
            })
            .then(response => response.json())
            .then(data => alert('Preferences saved successfully!'))
            .catch(error => console.error('Error:', error));
        }
    </script>
</head>
<body>
    <h2>Select Your Preferences</h2>
    
    <form onsubmit="savePreferences(event)">
        <label for="language">Language Preference:</label>
        <select id="language" name="language">
            <option value="english">English</option>
            <option value="hindi">Hindi</option>
            <option value="both">Both</option>
        </select>
        
        <br><br>
        
        <label for="frequency">Update Frequency:</label>
        <select id="frequency" name="frequency">
            <option value="monthly">Monthly (Regular)</option>
            <option value="3months">Every 3 Months (Major Updates)</option>
        </select>
        
        <br><br>
        
        <button type="submit">Save Preferences</button>
    </form>
</body>
</html>

